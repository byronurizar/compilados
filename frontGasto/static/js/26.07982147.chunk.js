(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[26],{117:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(118),c=n.n(a);c.a.DataTable=n(121),n(126);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;c()(e).DataTable({searching:!0,bLengthChange:!1,bAutoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"Todos"]],displayLength:t,language:{processing:"Cargando informaci\xf3n",search:"Filtrar por:",lengthMenu:"Mostrar _MENU_ filas",info:"Vizualizaci\xf3n  _END_ de _TOTAL_ filas",infoEmpty:"Vizualizaci\xf3n del elemento 0 a 0 de 0 filas",infoFiltered:"(Filtrado de _MAX_ filas en total)",infoPostFix:"",loadingRecords:"Cargando...",zeroRecords:"No se logr\xf3 encontrar ninguna coincidencia",emptyTable:"No existen registros",paginate:{first:"Primera",previous:"Anterior",next:"Siguiente",last:"Ultima"},aria:{sortAscending:": active para ordenar la columna en orden ascendente",sortDescending:": active para ordenar la columna en orden descendente"}}})},o=function(e){c()(e).DataTable().destroy()}},417:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(4),o=n.n(r),u=n(10),l=n(12),i=n(76),s=n(21),d=n(169),m=n(98),f=n(120),b=n(33),I=n.n(b),p=n(25),E=n(34),h=n.n(E),v=n(14),O=n(13),j=n(11),g=n(465),x=n(462),_=n(463),y=n(28),k=(n(8),n(29)),N=(n(19),n(16)),w=(n(397),function(e){var t=e.dataInicial,n=e.abrirModal,r=e.catMenu,i=e.handleUpdate,s=Object(p.d)((function(e){return e})),d=Object(a.useState)(!1),b=Object(l.a)(d,2),I=b[0],E=b[1],h=Object(a.useState)(!1),O=Object(l.a)(h,2),k=O[0],w=O[1],A=Object(a.useState)([]),S=Object(l.a)(A,2),M=S[0],C=S[1],T=Object(a.useState)(t.menuId),z=Object(l.a)(T,2),F=z[0],L=z[1],P=Object(a.useState)([]),D=Object(l.a)(P,2),B=D[0],U=D[1],J=Object(a.useState)([]),H=Object(l.a)(J,2),R=H[0],V=H[1],q=Object(a.useState)(null),G=Object(l.a)(q,2),W=G[0],X=G[1],K=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,Object(v.a)("rolmenuacceso",{method:"POST",body:JSON.stringify(t)});case 3:e.sent&&(Object(j.b)("Permiso registrado exitosamente"),Y(F),w(!0)),E(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,Object(v.a)("rolmenuacceso",{method:"PUT",body:JSON.stringify(t)});case 3:(n=e.sent)&&(Object(j.b)(n),Y(F),Z(),w(!0)),E(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.find((function(e){return 19===e.menuId&&3===e.accesoId}))){e.next=7;break}if(E(!0),0==t){e.next=7;break}return e.next=5,Object(v.a)("menuacceso?menuId=".concat(t,"&estadoId=1"));case 5:(n=e.sent)&&(U(n),Z());case 7:E(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.find((function(e){return 19===e.menuId&&3===e.accesoId}))){e.next=7;break}if(E(!0),0==F){e.next=7;break}return e.next=5,Object(v.a)("rolmenuacceso?menuId=".concat(F,"&rolId=").concat(t.rolId));case 5:(n=e.sent)&&V(n);case 7:E(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(o.a.mark((function e(n,a,c){var r,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n>0?(r=1,c&&(r=2),Q({rol_menu_accesoId:n,menu_accesoId:a,estadoId:r})):(u={rolId:t.rolId,menu_accesoId:a},K(u));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Z()}),[]),Object(a.useEffect)((function(){!function(){if(null===s||void 0===s?void 0:s.accesos){var e=s.accesos.filter((function(e){return 19===e.menuId}));C(e)}}()}),[]),Object(a.useEffect)((function(){Y(F),function(){var e=r.find((function(e){return Number(e.menuId)===Number(F)}));X(e)}()}),[F,M]),c.a.createElement(_.a,{show:n,onHide:function(){return i(k)},size:"lg"},!0===I?c.a.createElement(N.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a.Header,{closeButton:!0},c.a.createElement(_.a.Title,{as:"h5"},t.rol_menu_accesoId>0?"Actualizar Permiso":"Nuevo Permiso")),c.a.createElement(_.a.Body,null,c.a.createElement(g.a,{value:W||null,id:"menuId",name:"menuId",options:r||[],getOptionLabel:function(e){return e.descripcion},style:{width:600},size:"small",onChange:function(e,t){if(t){var n=t.menuId,a=void 0===n?0:n;X(t),L(a)}},renderInput:function(e){return c.a.createElement(x.a,Object.assign({},e,{label:"Nombre Menu"}))}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("h5",null,"Accesos disponibles"),c.a.createElement("hr",null),B.length>0&&c.a.createElement(f.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"C\xf3digo"),c.a.createElement("th",null,"Acceso"),(M.find((function(e){return 19===e.menuId&&1===e.accesoId}))||M.find((function(e){return 19===e.menuId&&2===e.accesoId})))&&c.a.createElement("th",null,"Estado"))),c.a.createElement("tbody",null,B.map((function(e){var t=e.menu_accesoId,n=e.Acceso,a=R.find((function(e){return Number(e.menu_accesoId)===Number(t)})),r=0,o=0;a&&(r=a.rol_menu_accesoId,o=a.estadoId);var u=!1;return 1===o&&(u=!0),c.a.createElement("tr",{key:t},c.a.createElement("td",null,t),c.a.createElement("td",null,n.descripcion),M.find((function(e){return 1===e.accesoId||2===e.accesoId}))?c.a.createElement("td",{style:{textAlign:"center"}},c.a.createElement(y.a.Group,null,c.a.createElement("div",{className:"switch switch-alternative d-inline m-r-10"},c.a.createElement(y.a.Control,{type:"checkbox",id:"menu_accesoId_".concat(t),checked:u,onChange:function(){$(r,t,u)}}),c.a.createElement(y.a.Label,{htmlFor:"menu_accesoId_".concat(t),className:"cr"})),c.a.createElement(y.a.Label,{htmlFor:"menu_accesoId_".concat(t)},u?"Activo":"Inactivo"))):c.a.createElement("td",{style:{textAlign:"center"}},c.a.createElement("label",{className:"text-danger"},"No Autorizado")))}))))),c.a.createElement(_.a.Footer,null,c.a.createElement(m.a,{variant:"warning",onClick:function(){i(k)}},"Salir"))))}),A=n(117),S=n(49),M=function(e){var t=e.idrol,n=Object(p.c)(),r=Object(p.d)((function(e){return e})),b=Object(a.useState)([]),E=Object(l.a)(b,2),g=E[0],x=E[1],_=Object(a.useState)(!0),y=Object(l.a)(_,2),M=y[0],C=y[1],T=Object(a.useState)(!1),z=Object(l.a)(T,2),F=z[0],L=z[1],P=Object(a.useState)([]),D=Object(l.a)(P,2),B=D[0],U=D[1],J=Object(a.useState)([]),H=Object(l.a)(J,2),R=H[0],V=H[1],q=Object(a.useState)([]),G=Object(l.a)(q,2),W=G[0],X=G[1],K={menuId:"",rolId:t,menu_accesoId:"",estadoId:1};console.log(K);var Q=Object(a.useState)(K),Y=Object(l.a)(Q,2),Z=Y[0],$=Y[1],ee=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.find((function(e){return 21===e.menuId&&3===e.accesoId}))){e.next=8;break}return C(!0),e.next=4,Object(v.a)("menu?estadoId=1");case 4:(t=e.sent)&&U(t),e.next=9;break;case 8:U([{menuId:"",descripcion:"No esta autorizado"}]);case 9:C(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.find((function(e){return 20===e.menuId&&3===e.accesoId}))){e.next=7;break}return Object(A.b)("#mytable"),C(!0),e.next=5,Object(v.a)("rolmenuacceso?rolId=".concat(t,"&estadoId=1;2"));case 5:(n=e.sent)&&V(n);case 7:C(!1),Object(A.a)("#mytable");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.find((function(e){return 11===e.menuId&&3===e.accesoId}))){e.next=8;break}return C(!0),e.next=4,Object(v.a)("rol?id=".concat(t,"&include=0"));case 4:(n=e.sent)&&X(n[0]),e.next=9;break;case 8:X([{nombre:"No esta autorizado"}]);case 9:C(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){!function(){if(null===r||void 0===r?void 0:r.accesos){var e=r.accesos.filter((function(e){return 20===e.menuId||11===e.menuId||21===e.menuId}));x(e)}C(!1)}()}),[null===r||void 0===r?void 0:r.accesos]),Object(a.useEffect)((function(){ee()}),[g]),Object(a.useEffect)((function(){ne(t),te(t)}),[t,g]),c.a.createElement(O.a,null,!0===M?c.a.createElement(N.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{className:"btn-page"},c.a.createElement(s.a,{sm:12},g.find((function(e){return 11===e.menuId&&3===e.accesoId}))?c.a.createElement(d.a,null,c.a.createElement(d.a.Header,null,c.a.createElement(d.a.Title,{as:"h5"},"".concat(W.nombre)," Acceso")),c.a.createElement(d.a.Body,null,c.a.createElement(i.a,{className:"align-items-center m-l-0"},c.a.createElement(s.a,null),c.a.createElement(s.a,{className:"text-right"},g.find((function(e){return 20===e.menuId&&1===e.accesoId}))&&c.a.createElement(m.a,{variant:"success",className:"btn-sm btn-round has-ripple",onClick:function(){L(!0),$(K)}},c.a.createElement("i",{className:"feather icon-plus"})," Agregar Acceso"))),g.find((function(e){return 20===e.menuId&&3===e.accesoId}))?c.a.createElement(f.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"C\xf3digo"),c.a.createElement("th",null,"Menu"),c.a.createElement("th",null,"Acceso"),c.a.createElement("th",null,"Estado"),g.find((function(e){return 20===e.menuId&&2===e.accesoId||20===e.menuId&&4===e.accesoId}))&&c.a.createElement("th",null))),c.a.createElement("tbody",null,R.map((function(e){var t=e.rol_menu_accesoId,n=e.MenuAcceso,a=n.Menu.descripcion,r=n.Acceso.descripcion,l=e.Estado.descripcion;return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t),c.a.createElement("td",null,a),c.a.createElement("td",null,r),c.a.createElement("td",null,l),g.find((function(e){return 20===e.menuId&&2===e.accesoId||20===e.menuId&&4===e.accesoId}))&&c.a.createElement("td",{style:{textAlign:"center"}},g.find((function(e){return 20===e.menuId&&2===e.accesoId}))&&c.a.createElement("button",{className:"btn-icon btn btn-info btn-sm",onClick:function(){!function(e){var t=R.find((function(t){return t.rol_menu_accesoId===e&&Number(t.rolId)===Number(K.rolId)})),n=t.rol_menu_accesoId,a=t.rolId,c=t.menu_accesoId,r=t.estadoId,o=t.MenuAcceso.menuId;$({rol_menu_accesoId:n,menu_accesoId:c,estadoId:r,menuId:o,rolId:a}),L(!0)}(t)}},c.a.createElement("i",{className:"feather icon-edit"})),g.find((function(e){return 20===e.menuId&&4===e.accesoId}))&&c.a.createElement("button",{className:"btn-icon btn btn-danger btn-sm",onClick:function(){var e;e=t,h()(I.a).fire({title:"Alerta?",text:"Esta seguro que desea eliminar el elemento",type:"warning",showCloseButton:!0,showCancelButton:!0}).then(function(){var t=Object(u.a)(o.a.mark((function t(n){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.value){t.next=8;break}return t.next=4,Object(v.a)("rolmenuacceso/".concat(e),{method:"DELETE"});case 4:(a=t.sent)&&(Object(j.b)(a),c=R.filter((function(t){return t.rol_menu_accesoId!==e})),V(c)),t.next=9;break;case 8:Object(j.d)("No se elimin\xf3 ning\xfan elemento");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},c.a.createElement("i",{className:"feather icon-trash-2"}))))})))):c.a.createElement(S.a,null),!0===F&&c.a.createElement(w,{abrirModal:F,setAbrirModal:L,catMenu:B,dataInicial:Z,handleUpdate:function(e){L(!1),!0===e&&(te(Z.rolId),n(Object(k.a)()))}}))):c.a.createElement(S.a,null)))))};t.default=function(e){var t=e.match.params.idrol;t=t||"";var n=atob(t).split("=")[1];return c.a.createElement(M,{idrol:n})}}}]);
//# sourceMappingURL=26.07982147.chunk.js.map