(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[15],{117:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"b",(function(){return l}));var n=t(118),r=t.n(n);r.a.DataTable=t(121),t(126);var c=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r()(e).DataTable({searching:!0,bLengthChange:!1,bAutoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"Todos"]],displayLength:a,language:{processing:"Cargando informaci\xf3n",search:"Filtrar por:",lengthMenu:"Mostrar _MENU_ filas",info:"Vizualizaci\xf3n  _END_ de _TOTAL_ filas",infoEmpty:"Vizualizaci\xf3n del elemento 0 a 0 de 0 filas",infoFiltered:"(Filtrado de _MAX_ filas en total)",infoPostFix:"",loadingRecords:"Cargando...",zeroRecords:"No se logr\xf3 encontrar ninguna coincidencia",emptyTable:"No existen registros",paginate:{first:"Primera",previous:"Anterior",next:"Siguiente",last:"Ultima"},aria:{sortAscending:": active para ordenar la columna en orden ascendente",sortDescending:": active para ordenar la columna en orden descendente"}}})},l=function(e){r()(e).DataTable().destroy()}},127:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=r.a.createContext(null)},169:function(e,a,t){"use strict";var n=t(1),r=t(3),c=t(6),l=t.n(c),o=t(0),i=t.n(o),u=t(7),s=t(30),d=t(51),m=t(127),b=i.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.className,o=e.variant,s=e.as,d=void 0===s?"img":s,m=Object(r.a)(e,["bsPrefix","className","variant","as"]),b=Object(u.b)(t,"card-img");return i.a.createElement(d,Object(n.a)({ref:a,className:l()(o?b+"-"+o:b,c)},m))}));b.displayName="CardImg",b.defaultProps={variant:null};var f=b,p=Object(d.a)("h5"),h=Object(d.a)("h6"),E=Object(s.a)("card-body"),v=i.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.className,s=e.bg,d=e.text,b=e.border,f=e.body,p=e.children,h=e.as,v=void 0===h?"div":h,O=Object(r.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),j=Object(u.b)(t,"card"),y=Object(o.useMemo)((function(){return{cardHeaderBsPrefix:j+"-header"}}),[j]);return i.a.createElement(m.a.Provider,{value:y},i.a.createElement(v,Object(n.a)({ref:a},O,{className:l()(c,j,s&&"bg-"+s,d&&"text-"+d,b&&"border-"+b)}),f?i.a.createElement(E,null,p):p))}));v.displayName="Card",v.defaultProps={body:!1},v.Img=f,v.Title=Object(s.a)("card-title",{Component:p}),v.Subtitle=Object(s.a)("card-subtitle",{Component:h}),v.Body=E,v.Link=Object(s.a)("card-link",{Component:"a"}),v.Text=Object(s.a)("card-text",{Component:"p"}),v.Header=Object(s.a)("card-header"),v.Footer=Object(s.a)("card-footer"),v.ImgOverlay=Object(s.a)("card-img-overlay");a.a=v},419:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(5),l=t(4),o=t.n(l),i=t(10),u=t(12),s=t(168),d=t(43),m=t.n(d),b=t(97),f=t.n(b),p=t(25),h=t(76),E=t(21),v=t(169),O=t(28),j=t(120),y=t(8),g=t(13),x=t(14),N=t(19),I=t(117),F=t(49),C=t(16),M=function(){var e=Object(p.d)((function(e){return e})),a=Object(n.useState)(!0),t=Object(u.a)(a,2),l=t[0],d=t[1],b=Object(n.useState)([]),M=Object(u.a)(b,2),T=M[0],k=M[1],D=Object(n.useState)([]),_=Object(u.a)(D,2),w=_[0],P=_[1],S=Object(n.useState)([]),A=Object(u.a)(S,2),L=A[0],Y=A[1],z=Object(n.useState)(""),R=Object(u.a)(z,2),U=R[0],G=R[1],V=Object(n.useState)(""),B=Object(u.a)(V,2),H=B[0],J=B[1],q=Object(n.useState)([]),W=Object(u.a)(q,2),X=W[0],K=W[1],Q=Object(N.a)({tabla:"",usuarioId:"",fechaInicial:"",fechaFinal:""}),Z=Object(u.a)(Q,4),$=Z[0],ee=Z[3],ae=function(){var e=Object(i.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!T.find((function(e){return 17===e.menuId&&3===e.accesoId}))){e.next=10;break}return d(!0),a.push({value:"0",label:"Todos"}),e.next=6,Object(x.a)("usuario?estadoId=1&include=0");case 6:(t=e.sent)&&t.map((function(e){var t=e.usuarioId,n=e.user_name;a.push({value:t,label:n})})),e.next=11;break;case 10:a.push({value:"-1",label:"No Autorizado"});case 11:K(a),d(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(i.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!T.find((function(e){return 27===e.menuId&&3===e.accesoId}))){e.next=10;break}return d(!0),a.push({value:"",label:"Todas"}),e.next=6,Object(x.a)("bitacora/cambios/tablas");case 6:(t=e.sent)&&t.map((function(e){var t=Object.keys(e),n=Object(u.a)(t,1)[0],r=e["".concat(n)];a.push({value:r,label:r})})),e.next=11;break;case 10:a.push({value:"-1",label:"No Autorizado"});case 11:P(a),d(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(i.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.find((function(e){return 27===e.menuId&&3===e.accesoId}))){e.next=9;break}return d(!0),Object(I.b)("#mytable"),e.next=5,Object(x.a)("bitacora/cambios",{method:"POST",body:JSON.stringify($)});case 5:(a=e.sent)&&Y(a),d(!1),Object(I.a)("#mytable",25);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===e||void 0===e?void 0:e.accesos){var a=e.accesos.filter((function(e){return 27===e.menuId||17===e.menuId}));k(a)}d(!1)}()}),[]),Object(n.useEffect)((function(){te(),ae()}),[T]),r.a.createElement(g.a,null,r.a.createElement(h.a,{className:"btn-page"},r.a.createElement(E.a,{sm:12},r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Title,{as:"h5"},"Listado de Cambios")),r.a.createElement(v.a.Body,null,r.a.createElement(h.a,{className:"align-items-center m-l-0"},r.a.createElement(E.a,null,r.a.createElement(y.ValidationForm,{onSubmit:function(e){e.preventDefault(),ne()}},r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:E.a,md:"6"},r.a.createElement(O.a.Label,{htmlFor:"tabla"},"Tabla"),r.a.createElement(s.a,{id:"tabla",name:"tabla",className:"basic-single",classNamePrefix:"select",required:!0,placeholder:"Tabla",onChange:function(e){var a=e.value;ee(Object(c.a)({},$,{tabla:a}))},options:w})),r.a.createElement(O.a.Group,{as:E.a,md:"6"},r.a.createElement(O.a.Label,{htmlFor:"usuarioId"},"Usuario"),r.a.createElement(s.a,{id:"usuarioId",name:"usuarioId",className:"basic-single",classNamePrefix:"select",required:!0,placeholder:"Usuario",onChange:function(e){var a=e.value;ee(Object(c.a)({},$,{usuarioId:a}))},options:X}))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Group,{as:E.a,md:"3"},r.a.createElement(O.a.Label,{htmlFor:"fechaInicial"},"Fecha Inicial"),r.a.createElement("div",{className:"form-group"},r.a.createElement(f.a,{id:"fechaInicial",name:"fechaInicial",dateFormat:"dd/MM/yyyy",selected:U,onChange:function(e){var a=m()(e).format("YYYY/MM/DD");ee(Object(c.a)({},$,{fechaInicial:a})),G(e)},className:"form-control",placeholderText:"dd/MM/yyyy",autoComplete:"off",maxDate:new Date}))),r.a.createElement(O.a.Group,{as:E.a,md:"3"},r.a.createElement(O.a.Label,{htmlFor:"fechaFinal"},"Fecha Final"),r.a.createElement("div",{className:"form-group"},r.a.createElement(f.a,{id:"fechaFinal",name:"fechaFinal",dateFormat:"dd/MM/yyyy",selected:H,onChange:function(e){var a=m()(e).format("YYYY/MM/DD");ee(Object(c.a)({},$,{fechaFinal:a})),J(e)},className:"form-control",placeholderText:"dd/MM/yyyy",autoComplete:"off",maxDate:new Date}))),r.a.createElement(O.a.Group,{as:E.a,md:"2"},r.a.createElement(O.a.Label,{htmlFor:"status"},"\xa0\xa0"),r.a.createElement("button",{className:"btn btn-block btn-primary mb-0",type:"submit"},"Buscar",r.a.createElement("i",{className:"feather icon-search"}))))))),r.a.createElement("hr",null),!0===l?r.a.createElement(C.a,null):r.a.createElement(r.a.Fragment,null,T.find((function(e){return 27===e.menuId&&3===e.accesoId}))?r.a.createElement(j.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Codigo"),r.a.createElement("th",null,"Tabla"),r.a.createElement("th",null,"Campo"),r.a.createElement("th",null,"Id Modificado"),r.a.createElement("th",null,"Tipo de Dato"),r.a.createElement("th",null,"Valor Anterior"),r.a.createElement("th",null,"Valor Nuevo"),r.a.createElement("th",null,"Usuario"),r.a.createElement("th",null,"Fecha"))),r.a.createElement("tbody",null,L.map((function(e){var a,t=e.bitacora_cambiosId,n=e.tabla,c=e.campo,l=e.modificadoId,o=e.tipo_dato,i=e.valor_anterior,u=e.valor_nuevo,s=e.Usuario,d=e.fecha_crea,m="N/A";s&&(m=null!==(a=null===s||void 0===s?void 0:s.user_name)&&void 0!==a?a:"N/A");return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,l),r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,u),r.a.createElement("td",null,m),r.a.createElement("td",null,d))})))):r.a.createElement(F.a,null)))))))};a.default=function(){return r.a.createElement("div",null,r.a.createElement(M,null))}}}]);
//# sourceMappingURL=15.d6eb5df4.chunk.js.map