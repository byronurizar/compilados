(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[27],{120:function(e,t,a){"use strict";var n=a(1),r=a(3),c=a(6),o=a.n(c),l=a(0),s=a.n(l),i=a(7),u=s.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.className,l=e.striped,u=e.bordered,m=e.borderless,d=e.hover,b=e.size,f=e.variant,p=e.responsive,E=Object(r.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),v=Object(i.b)(a,"table"),h=o()(c,v,f&&v+"-"+f,b&&v+"-"+b,l&&v+"-striped",u&&v+"-bordered",m&&v+"-borderless",d&&v+"-hover"),I=s.a.createElement("table",Object(n.a)({},E,{className:h,ref:t}));if(p){var O=v+"-responsive";return"string"===typeof p&&(O=O+"-"+p),s.a.createElement("div",{className:O},I)}return I}));t.a=u},416:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),l=a(10),s=a(12),i=a(76),u=a(21),m=a(169),d=a(98),b=a(120),f=a(33),p=a.n(f),E=a(25),v=a(34),h=a.n(v),I=a(14),O=a(13),j=a(11),g=a(463),x=a(28),N=a(8),y=a(29),w=a(19),k=a(16),C=function(e){var t=e.dataInicial,a=e.abrirModal,c=e.setAbrirModal,i=e.GetCatRol,m=Object(n.useState)(!1),d=Object(s.a)(m,2),b=d[0],f=d[1],p=Object(w.a)(t),v=Object(s.a)(p,2),h=v[0],O=v[1],C=Object(E.c)(),S=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)("rol",{method:"POST",body:JSON.stringify(h)});case 2:e.sent&&(Object(j.b)("Rol Registrado exitosamente"),i(),c(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)("rol",{method:"PUT",body:JSON.stringify(h)});case 2:(t=e.sent)&&(Object(j.b)(t),C(Object(y.a)()),i()),c(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),f(!0),!(t.rolId>0)){e.next=7;break}return e.next=5,R();case 5:e.next=9;break;case 7:return e.next=9,S();case 9:f(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(g.a,{show:a,onHide:function(){return c(!1)}},!0===b?r.a.createElement(k.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,{as:"h5"},t.rolId>0?"Actualizar Rol":"Nuevo Rol")),r.a.createElement(g.a.Body,null,r.a.createElement(N.ValidationForm,{onSubmit:A,onErrorSubmit:function(e,t,a){Object(j.d)("Por favor complete toda la informaci\xf3n solicitada por el formulario")}},r.a.createElement(x.a.Row,null,r.a.createElement(x.a.Group,{as:u.a,md:"12"},r.a.createElement(x.a.Label,{htmlFor:"nombre"},"Nombre"),r.a.createElement(N.TextInput,{name:"nombre",id:"nombre",required:!0,value:h.nombre,onChange:O,errorMessage:"Campo obligatorio",placeholder:"Nombre",autoComplete:"off",style:{textTransform:"capitalize"},type:"text"})),r.a.createElement(x.a.Group,{as:u.a,md:"12"},r.a.createElement(x.a.Label,{htmlFor:"descripcion"},"Descripci\xf3n"),r.a.createElement(N.TextInput,{name:"descripcion",id:"descripcion",required:!0,value:h.descripcion,onChange:O,errorMessage:"Campo obligatorio",placeholder:"Descripci\xf3n",autoComplete:"off",style:{textTransform:"capitalize"},type:"text"})),t.rolId>0&&r.a.createElement(x.a.Group,{as:u.a,md:"12"},r.a.createElement(x.a.Label,{htmlFor:"estadoId"},"Estado"),r.a.createElement(N.SelectGroup,{name:"estadoId",id:"estadoId",value:h.estadoId,required:!0,errorMessage:"Campo obligatorio",onChange:O},r.a.createElement("option",{value:""},"Seleccione un estado"),r.a.createElement("option",{value:"1"},"Activo"),r.a.createElement("option",{value:"2"},"Inactivo"))),r.a.createElement("div",{className:"col-sm-3"}),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("button",{type:"button",onClick:function(){c(!1)},className:"btn btn-warning"}," Cancelar")),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("button",{type:"submit",className:"btn btn-success"}," ",t.rolId>0?"Actualizar":"Registrar")))))))},S=a(48),R=a(49),A=function(){var e=Object(E.d)((function(e){return e})),t=Object(E.c)(),a=Object(n.useState)(!0),c=Object(s.a)(a,2),f=c[0],v=c[1],g=Object(n.useState)([]),x=Object(s.a)(g,2),N=x[0],w=x[1],A=Object(n.useState)(!1),T=Object(s.a)(A,2),M=T[0],z=T[1],F=Object(n.useState)([]),G=Object(s.a)(F,2),B=G[0],D=G[1],P={rolId:"",nombre:"",descripcion:"",estadoId:1},q=Object(n.useState)(P),J=Object(s.a)(q,2),L=J[0],H=J[1],U=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.find((function(e){return 11===e.menuId&&3===e.accesoId}))){e.next=6;break}return v(!0),e.next=4,Object(I.a)("rol?estadoId=1;2");case 4:(t=e.sent)&&D(t);case 6:v(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===e||void 0===e?void 0:e.accesos){var t=e.accesos.filter((function(e){return 11===e.menuId||20===e.menuId}));w(t)}v(!1)}()}),[]),Object(n.useEffect)((function(){U()}),[N]),r.a.createElement(O.a,null,r.a.createElement(i.a,{className:"btn-page"},r.a.createElement(u.a,{sm:12},r.a.createElement(m.a,null,r.a.createElement(m.a.Header,null,r.a.createElement(m.a.Title,{as:"h5"},"Roles")),r.a.createElement(m.a.Body,null,!0===f?r.a.createElement(k.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"align-items-center m-l-0"},r.a.createElement(u.a,null),r.a.createElement(u.a,{className:"text-right"},N.find((function(e){return 11===e.menuId&&1===e.accesoId}))&&r.a.createElement(d.a,{variant:"success",className:"btn-sm btn-round has-ripple",onClick:function(){z(!0),H(P)}},r.a.createElement("i",{className:"feather icon-plus"})," Agregar Nuevo Rol"))),N.find((function(e){return 11===e.menuId&&3===e.accesoId}))?r.a.createElement(b.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"C\xf3digo"),r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Descripci\xf3n"),r.a.createElement("th",null,"Estado"),N.find((function(e){return 20===e.menuId&&3===e.accesoId}))&&r.a.createElement("th",null,"Accesos"),N.find((function(e){return 11===e.menuId&&2===e.accesoId||11===e.menuId&&4===e.accesoId}))&&r.a.createElement("th",null))),r.a.createElement("tbody",null,B.map((function(e){var a=e.rolId,n=e.nombre,c=e.descripcion,s=e.Estado.descripcion;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,s),N.find((function(e){return 20===e.menuId&&3===e.accesoId}))&&r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement(S.a,{className:"btn-icon btn btn-info btn-sm",to:"/base/seguridad/rolmenuacceso/".concat(btoa("idrol=".concat(a)))},r.a.createElement("i",{className:"feather icon-lock"}))),N.find((function(e){return 11===e.menuId&&2===e.accesoId||11===e.menuId&&4===e.accesoId}))&&r.a.createElement("td",{style:{textAlign:"center"}},N.find((function(e){return 11===e.menuId&&2===e.accesoId}))&&r.a.createElement("button",{className:"btn-icon btn btn-info btn-sm",onClick:function(){!function(e){var t=B.find((function(t){return t.rolId===e})),a=t.rolId,n=t.nombre,r=t.descripcion,c=t.estadoId;H({rolId:a,nombre:n,descripcion:r,estadoId:c}),z(!0)}(a)}},r.a.createElement("i",{className:"feather icon-edit"})),N.find((function(e){return 11===e.menuId&&4===e.accesoId}))&&r.a.createElement("button",{className:"btn-icon btn btn-danger btn-sm",onClick:function(){var e;e=a,h()(p.a).fire({title:"Alerta?",text:"Esta seguro que desea eliminar el elemento",type:"warning",showCloseButton:!0,showCancelButton:!0}).then(function(){var a=Object(l.a)(o.a.mark((function a(n){var r,c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.value){a.next=8;break}return a.next=4,Object(I.a)("rol/".concat(e),{method:"DELETE"});case 4:(r=a.sent)&&(Object(j.b)(r),t(Object(y.a)()),c=B.filter((function(t){return t.rolId!==e})),D(c)),a.next=9;break;case 8:Object(j.d)("No se elimin\xf3 ning\xfan elemento");case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},r.a.createElement("i",{className:"feather icon-trash-2"}))))})))):r.a.createElement(R.a,null)),!0===M&&r.a.createElement(C,{abrirModal:M,setAbrirModal:z,GetCatRol:U,dataInicial:L}))))))};t.default=function(){return r.a.createElement(A,null)}}}]);
//# sourceMappingURL=27.f3cf47b3.chunk.js.map