{"version":3,"sources":["App/pages/InformacionUsuario.js","App/components/base/Infouser.js","App/components/base/UploadImagen.js"],"names":["InformacionUsuario","Infouser","bufferBase64","userInfo","useSelector","state","useState","abrirModal","setAbrirModal","abrirModalUpload","setAbrirModalUpload","imagen","Buffer","foto","data","toString","xl","md","className","sm","Body","src","alt","generoId","avatarWoman","avatarMen","user_name","href","onClick","nombre","moment","fecha_nacimiento","format","fecha_cambio_password","email","target","fecha_crea","genero","perfiles","map","rolId","key","show","onHide","Header","closeButton","isModal","Title","as","UploadImagen","file","setFile","loading","setLoading","dispatch","useDispatch","eventHandlers","addedfile","handleSubmit","a","FormData","append","name","callApi","method","body","alert_exitoso","UpdateUserInfo","alert_error","Row","Group","Col","config","iconFiletypes","showFiletypeIcon","postUrl","djsConfig","addRemoveLinks","acceptedFiles"],"mappings":"qGAAA,oCAQeA,UANY,WACvB,OACE,kBAAC,IAAD,Q,oOCMOC,EAAW,WAAO,IAIvBC,EAHIC,EAAaC,aAAY,SAAAC,GAAK,OAAIA,KAAlCF,SADkB,EAEUG,oBAAS,GAFnB,mBAEnBC,EAFmB,KAEPC,EAFO,OAGsBF,oBAAS,GAH/B,mBAGnBG,EAHmB,KAGDC,EAHC,KAQ1B,OAHIP,EAASQ,SACTT,EAAe,IAAIU,EAAOT,EAASQ,OAAOE,KAAKC,KAAM,UAAUC,SAAS,WAGxE,kBAAC,IAAD,KACI,kBAAC,IAAD,KAEI,kBAAC,IAAD,CAAKC,GAAI,GAAIC,GAAI,IACb,6BACA,6BAEId,GACA,kBAAC,IAAD,CAAMe,UAAU,kBACZ,kBAAC,IAAD,CAAKA,UAAU,eACX,kBAAC,IAAD,CAAKC,GAAI,EAAGD,UAAU,+BAClB,kBAAC,IAAKE,KAAN,CAAWF,UAAU,0BACjB,yBAAKA,UAAU,UAEY,MAAnBf,EAASQ,OACL,yBAAKU,IAAK,0BAA4BnB,EAAcgB,UAAU,aAAaI,IAAI,sBAEzD,IAAtBnB,EAASoB,SACL,yBAAKF,IAAKG,IAAaN,UAAU,aAAaI,IAAI,iBAElD,yBAAKD,IAAKI,IAAWP,UAAU,aAAaI,IAAI,kBAGhE,wBAAIJ,UAAU,sBAAsBf,EAASuB,WAC7C,uBAAGC,KAAK,IAAIT,UAAU,aAAaU,QAAS,WAAQpB,GAAeD,KAAnE,wBAAoG,uBAAGW,UAAU,mCACjH,6BACA,uBAAGS,KAAK,IAAIT,UAAU,aAAaU,QAAS,WAAQlB,GAAqBD,KAAzE,iBAA4G,uBAAGS,UAAU,sCAGjI,kBAAC,IAAD,CAAKC,GAAI,GACL,kBAAC,IAAKC,KAAN,KACI,wBAAIF,UAAU,oCAAd,eACA,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,uBAAGA,UAAU,kBAAb,UACA,wBAAIA,UAAU,sBAAsBf,EAAS0B,SAEjD,kBAAC,IAAD,KACI,uBAAGX,UAAU,kBAAb,uBACA,wBAAIA,UAAU,sBAAsBY,IAAO3B,EAAS4B,kBAAkBC,OAAO,iBAGrF,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,uBAAGd,UAAU,kBAAb,yCACA,wBAAIA,UAAU,sBAAsBY,IAAO3B,EAAS8B,uBAAuBD,OAAO,gBAEtF,kBAAC,IAAD,KACI,uBAAGd,UAAU,kBAAb,UACA,wBAAIA,UAAU,sBAAqB,uBAAGS,KAAI,iBAAYxB,EAAS+B,MAArB,0BAAiDC,OAAO,QAAQhC,EAAS+B,OAAnH,OAGR,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,uBAAGhB,UAAU,kBAAb,oBACA,wBAAIA,UAAU,sBAAsBY,IAAO3B,EAASiC,YAAYJ,OAAO,gBAE3E,kBAAC,IAAD,KACI,uBAAGd,UAAU,kBAAb,aACA,wBAAIA,UAAU,sBAA0C,IAApBf,EAASkC,OAAe,YAAc,cAGlF,wBAAInB,UAAU,2CAAd,YACA,kBAAC,IAAD,KACI,kBAAC,IAAD,KAEQf,EAASmC,SAASC,KAAI,gBAAGC,EAAH,EAAGA,MAAOX,EAAV,EAAUA,OAAV,OAClB,wBAAIY,IAAKD,EAAOtB,UAAU,sBAAsBW,cAaxFtB,GACA,kBAAC,IAAD,CAAOmC,KAAMnC,EAAYoC,OAAQ,kBAAMnC,GAAc,KACjD,kBAAC,IAAMoC,OAAP,CAAcC,aAAW,IAGzB,kBAAC,IAAMzB,KAAP,KACI,kBAAC,IAAD,CAA0B0B,SAAS,EAAMtC,cAAeA,MAKhEC,GACA,kBAAC,IAAD,CAAOiC,KAAMjC,EAAkBkC,OAAQ,kBAAMjC,GAAoB,KAC7D,kBAAC,IAAMkC,OAAP,CAAcC,aAAW,GACrB,kBAAC,IAAME,MAAP,CAAaC,GAAG,MAAhB,kBAEJ,kBAAC,IAAM5B,KAAP,KACI,kBAAC,IAAD,CAAcZ,cAAeE,U,yNC3GxCuC,EAAe,SAAC,GAAuB,IAArBzC,EAAoB,EAApBA,cAAoB,EACvBF,mBAAS,MADc,mBACxC4C,EADwC,KAClCC,EADkC,OAEjB7C,oBAAS,GAFQ,mBAExC8C,EAFwC,KAE/BC,EAF+B,KAGzCC,EAAWC,cAWbC,EAAgB,CAAEC,UAAW,SAACP,GAAD,OAAUC,EAAQD,KAE7CQ,EAAY,uCAAG,4BAAAC,EAAA,yDACjBN,GAAW,IACPH,EAFa,wBAGPpC,EAAO,IAAI8C,UACZC,OAAO,OAAQX,EAAMA,EAAKY,MAC/BhD,EAAK+C,OAAO,cAAe,sBALd,SAOQE,YAAQ,eAAgB,CACzCC,OAAQ,OACRC,KAAMnD,IACP,GAVU,gBAYToD,YAAc,kCACdZ,EAASa,eACT3D,GAAc,IAdL,wBAiBb4D,YAAY,6BAjBC,QAmBjBf,GAAW,GAnBM,4CAAH,qDAwBlB,OACI,kBAAC,IAAD,MAEoB,IAAZD,EACI,kBAAC,IAAD,MACE,oCACE,kBAAC,IAAKiB,IAAN,KACI,kBAAC,IAAKC,MAAN,CAAYtB,GAAIuB,IAAKtD,GAAG,MACpB,kBAAC,oBAAD,CAAmBuD,OA5ChC,CACXC,cAAe,CAAC,OAAQ,OAAQ,SAChCC,kBAAkB,EAClBC,QAAS,KAyCkDnB,cAAeA,EAAeoB,UAtC3E,CACdC,gBAAgB,EAChBC,cAAe,4BAuCC,kBAAC,IAAKT,IAAN,KACI,kBAAC,IAAKC,MAAN,CAAYtB,GAAIuB,IAAKtD,GAAG,KACpB,4BAAQC,UAAU,gCAAgCU,QAhBvD,WACnBpB,GAAc,KAeU,aAEJ,kBAAC,IAAK8D,MAAN,CAAYtB,GAAIuB,IAAKtD,GAAG,KACpB,4BAAQC,UAAU,iCAAiCU,QAAS8B,GAA5D","file":"static/js/23.5ff6dd9f.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Infouser } from '../components/base/Infouser';\r\nconst InformacionUsuario = () => {\r\n    return (\r\n      <Infouser/>\r\n    )\r\n}\r\n\r\nexport default InformacionUsuario;\r\n","\r\nimport React, { useState } from 'react'\r\nimport { Card, Col, Modal, Row } from 'react-bootstrap'\r\nimport moment from 'moment';\r\nimport { useSelector } from 'react-redux';\r\nimport Aux from '../../../hoc/_Aux'\r\nimport avatarMen from '../../../assets/images/user/userMen.jpg';\r\nimport avatarWoman from '../../../assets/images/user/userWoman.jpg';\r\nimport {ActualizacionContrasenia} from './ActualizacionContrasenia';\r\nimport { UploadImagen } from './UploadImagen';\r\nexport const Infouser = () => {\r\n    const { userInfo } = useSelector(state => state);\r\n    const [abrirModal, setAbrirModal] = useState(false);\r\n    const [abrirModalUpload, setAbrirModalUpload] = useState(false);\r\n    let bufferBase64;\r\n    if (userInfo.imagen) {\r\n        bufferBase64 = new Buffer(userInfo.imagen.foto.data, \"binary\").toString(\"base64\");\r\n    }\r\n    return (\r\n        <Aux>\r\n            <Row>\r\n\r\n                <Col xl={12} md={12}>\r\n                    <br></br>\r\n                    <br></br>\r\n                    {\r\n                        userInfo &&\r\n                        <Card className=\"user-card-full\">\r\n                            <Row className=\"m-l-0 m-r-0\">\r\n                                <Col sm={4} className=\"bg-c-blue user-profile-side\">\r\n                                    <Card.Body className=\"text-center text-white\">\r\n                                        <div className=\"m-b-25\">\r\n                                            {\r\n                                                userInfo.imagen != null ?\r\n                                                    <img src={\"data:image/jpeg;base64,\" + bufferBase64} className=\"img-radius\" alt=\"Imagen de usuario\" />\r\n                                                    :\r\n                                                    userInfo.generoId === 2 ?\r\n                                                        <img src={avatarWoman} className=\"img-radius\" alt=\"User-Profile\" />\r\n                                                        :\r\n                                                        <img src={avatarMen} className=\"img-radius\" alt=\"User-Profile\" />\r\n                                            }\r\n                                        </div>\r\n                                        <h6 className=\"f-w-600 text-white\">{userInfo.user_name}</h6>\r\n                                        <a href=\"#\" className=\"text-white\" onClick={() => { setAbrirModal(!abrirModal) }}>Cambiar Contraseña<i className=\"feather icon-edit m-t-10 f-16\" /></a>\r\n                                        <br></br>\r\n                                        <a href=\"#\" className=\"text-white\" onClick={() => { setAbrirModalUpload(!abrirModalUpload) }}>Cambiar Imagen<i className=\"feather icon-image m-t-10 f-16\" /></a>\r\n                                    </Card.Body>\r\n                                </Col>\r\n                                <Col sm={8}>\r\n                                    <Card.Body>\r\n                                        <h6 className=\"m-b-20 p-b-5 b-b-default f-w-600\">Information</h6>\r\n                                        <Row>\r\n                                            <Col>\r\n                                                <p className=\"m-b-10 f-w-600\">Nombre</p>\r\n                                                <h6 className=\"text-muted f-w-400\">{userInfo.nombre}</h6>\r\n                                            </Col>\r\n                                            <Col>\r\n                                                <p className=\"m-b-10 f-w-600\">Fecha de Nacimiento</p>\r\n                                                <h6 className=\"text-muted f-w-400\">{moment(userInfo.fecha_nacimiento).format('DD/MM/YYYY')}</h6>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row>\r\n                                            <Col>\r\n                                                <p className=\"m-b-10 f-w-600\">Fecha de Vencimiento de Contraseña</p>\r\n                                                <h6 className=\"text-muted f-w-400\">{moment(userInfo.fecha_cambio_password).format('DD/MM/YYYY')}</h6>\r\n                                            </Col>\r\n                                            <Col>\r\n                                                <p className=\"m-b-10 f-w-600\">Correo</p>\r\n                                                <h6 className=\"text-muted f-w-400\"><a href={`mailto:${userInfo.email}?Subject=Buen%20día`} target=\"_top\">{userInfo.email}</a> </h6>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row>\r\n                                            <Col>\r\n                                                <p className=\"m-b-10 f-w-600\">Fecha de Ingreso</p>\r\n                                                <h6 className=\"text-muted f-w-400\">{moment(userInfo.fecha_crea).format('DD/MM/YYYY')}</h6>\r\n                                            </Col>\r\n                                            <Col>\r\n                                                <p className=\"m-b-10 f-w-600\">Género</p>\r\n                                                <h6 className=\"text-muted f-w-400\">{userInfo.genero === 1 ? 'MASCULINO' : 'FEMENINO'}</h6>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <h6 className=\"m-b-20 m-t-50 p-b-5 b-b-default f-w-600\">Perfiles</h6>\r\n                                        <Row>\r\n                                            <Col>\r\n                                                {\r\n                                                    userInfo.perfiles.map(({ rolId, nombre }) => (\r\n                                                        <h6 key={rolId} className=\"text-muted f-w-400\">{nombre}</h6>\r\n                                                    ))\r\n                                                }\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Card.Body>\r\n                                </Col>\r\n                            </Row>\r\n                        </Card>\r\n                    }\r\n                </Col>\r\n            </Row>\r\n            {\r\n                abrirModal &&\r\n                <Modal show={abrirModal} onHide={() => setAbrirModal(false)}>\r\n                    <Modal.Header closeButton>\r\n                        {/* <Modal.Title as=\"h5\">Información</Modal.Title> */}\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <ActualizacionContrasenia isModal={true} setAbrirModal={setAbrirModal} />\r\n                    </Modal.Body>\r\n                </Modal>\r\n            }\r\n             {\r\n                abrirModalUpload &&\r\n                <Modal show={abrirModalUpload} onHide={() => setAbrirModalUpload(false)}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title as=\"h5\">Cargar Imagen</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <UploadImagen setAbrirModal={setAbrirModalUpload}/>\r\n                    </Modal.Body>\r\n                </Modal>\r\n            }\r\n        </Aux>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Col, Form } from 'react-bootstrap';\r\nimport { DropzoneComponent } from 'react-dropzone-component';\r\nimport { useDispatch } from 'react-redux';\r\nimport Aux from '../../../hoc/_Aux';\r\nimport { UpdateUserInfo } from '../../../actions/auth';\r\nimport callApi from '../../../helpers/conectorApi';\r\nimport { alert_error, alert_exitoso } from '../../../helpers/Notificacion';\r\nimport Loading from './Loading';\r\nexport const UploadImagen = ({ setAbrirModal }) => {\r\n    const [file, setFile] = useState(null);\r\n    const [loading, setLoading] = useState(false)\r\n    const dispatch = useDispatch();\r\n    const config = {\r\n        iconFiletypes: ['.jpg', '.png', '.jpeg'],\r\n        showFiletypeIcon: true,\r\n        postUrl: '/'\r\n    };\r\n\r\n    const djsConfig = {\r\n        addRemoveLinks: true,\r\n        acceptedFiles: \"image/jpeg,image/png\"\r\n    };\r\n    var eventHandlers = { addedfile: (file) => setFile(file) }\r\n\r\n    const handleSubmit = async () => {\r\n        setLoading(true);\r\n        if (file) {\r\n            const data = new FormData();\r\n            data.append(\"file\", file, file.name);\r\n            data.append(\"descripcion\", \"Prueba desde Front\");\r\n\r\n            let response = await callApi('usuario/foto', {\r\n                method: 'POST',\r\n                body: data\r\n            }, true);\r\n            if (response) {\r\n                alert_exitoso(\"Imagen registrada exitosamente\");\r\n                dispatch(UpdateUserInfo());\r\n                setAbrirModal(false);\r\n            }\r\n        } else {\r\n            alert_error(\"Debe de cargar una imagen\");\r\n        }\r\n        setLoading(false);\r\n    }\r\n    const handleCancelar = () => {\r\n        setAbrirModal(false);\r\n    }\r\n    return (\r\n        <Aux>\r\n            {\r\n                loading === true ?\r\n                    <Loading />\r\n                    : <>\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} md=\"12\">\r\n                                <DropzoneComponent config={config} eventHandlers={eventHandlers} djsConfig={djsConfig} />\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} md=\"6\">\r\n                                <button className=\"btn btn-block btn-danger mb-4\" onClick={handleCancelar}>Cancelar</button>\r\n                            </Form.Group>\r\n                            <Form.Group as={Col} md=\"6\">\r\n                                <button className=\"btn btn-block btn-primary mb-4\" onClick={handleSubmit}>Cargar</button>\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                    </>\r\n            }\r\n        </Aux>\r\n    )\r\n}\r\n"],"sourceRoot":""}