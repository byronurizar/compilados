(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[24],{576:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(3),c=t(5),o=t.n(c),i=t(10),u=t(13),s=t(155),m=t(98),d=t.n(m),b=t(161),f=t.n(b),E=t(22),p=t(71),h=t(21),v=t(367),g=t(26),O=t(246),y=t(11),j=t(14),I=t(15),N=t(23),F=t(87),x=t(84),T=t(18),M=function(){var e=Object(E.d)((function(e){return e})),a=Object(n.useState)(!0),t=Object(u.a)(a,2),c=t[0],m=t[1],b=Object(n.useState)([]),M=Object(u.a)(b,2),D=M[0],_=M[1],k=Object(n.useState)([]),C=Object(u.a)(k,2),w=C[0],S=C[1],A=Object(n.useState)([]),z=Object(u.a)(A,2),L=z[0],Y=z[1],U=Object(n.useState)(""),G=Object(u.a)(U,2),P=G[0],V=G[1],R=Object(n.useState)(""),q=Object(u.a)(R,2),J=q[0],B=q[1],H=Object(n.useState)([]),W=Object(u.a)(H,2),X=W[0],K=W[1],Q=Object(N.a)({tabla:"",usuarioId:"",fechaInicial:"",fechaFinal:""}),Z=Object(u.a)(Q,4),$=Z[0],ee=Z[3],ae=function(){var e=Object(i.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!D.find((function(e){return 17===e.menuId&&3===e.accesoId}))){e.next=10;break}return m(!0),a.push({value:"0",label:"Todos"}),e.next=6,Object(I.a)("usuario?estadoId=1&include=0");case 6:(t=e.sent)&&t.map((function(e){var t=e.usuarioId,n=e.user_name;a.push({value:t,label:n})})),e.next=11;break;case 10:a.push({value:"-1",label:"No Autorizado"});case 11:K(a),m(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(i.a)(o.a.mark((function e(){var a,t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!D.find((function(e){return 27===e.menuId&&3===e.accesoId}))){e.next=10;break}return m(!0),a.push({value:"",label:"Todas"}),e.next=6,Object(I.a)("bitacora/cambios/tablas");case 6:(t=e.sent)&&t.map((function(e){var t=Object.keys(e),n=Object(u.a)(t,1)[0],r=e["".concat(n)];a.push({value:r,label:r})})),e.next=11;break;case 10:a.push({value:"-1",label:"No Autorizado"});case 11:S(a),m(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(i.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.find((function(e){return 27===e.menuId&&3===e.accesoId}))){e.next=9;break}return m(!0),Object(F.b)("#mytable"),e.next=5,Object(I.a)("bitacora/cambios",{method:"POST",body:JSON.stringify($)});case 5:(a=e.sent)&&Y(a),m(!1),Object(F.a)("#mytable",25);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===e||void 0===e?void 0:e.accesos){var a=e.accesos.filter((function(e){return 27===e.menuId||17===e.menuId}));_(a)}m(!1)}()}),[]),Object(n.useEffect)((function(){te(),ae()}),[D]),r.a.createElement(j.a,null,r.a.createElement(p.a,{className:"btn-page"},r.a.createElement(h.a,{sm:12},r.a.createElement(v.a,null,r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Title,{as:"h5"},"Listado de Cambios")),r.a.createElement(v.a.Body,null,r.a.createElement(p.a,{className:"align-items-center m-l-0"},r.a.createElement(h.a,null,r.a.createElement(y.ValidationForm,{onSubmit:function(e){e.preventDefault(),ne()}},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Group,{as:h.a,md:"6"},r.a.createElement(g.a.Label,{htmlFor:"tabla"},"Tabla"),r.a.createElement(s.a,{id:"tabla",name:"tabla",className:"basic-single",classNamePrefix:"select",required:!0,placeholder:"Tabla",onChange:function(e){var a=e.value;ee(Object(l.a)({},$,{tabla:a}))},options:w})),r.a.createElement(g.a.Group,{as:h.a,md:"6"},r.a.createElement(g.a.Label,{htmlFor:"usuarioId"},"Usuario"),r.a.createElement(s.a,{id:"usuarioId",name:"usuarioId",className:"basic-single",classNamePrefix:"select",required:!0,placeholder:"Usuario",onChange:function(e){var a=e.value;ee(Object(l.a)({},$,{usuarioId:a}))},options:X}))),r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Group,{as:h.a,md:"3"},r.a.createElement(g.a.Label,{htmlFor:"fechaInicial"},"Fecha Inicial"),r.a.createElement("div",{className:"form-group"},r.a.createElement(f.a,{id:"fechaInicial",name:"fechaInicial",dateFormat:"dd/MM/yyyy",selected:P,onChange:function(e){var a=d()(e).format("YYYY/MM/DD");ee(Object(l.a)({},$,{fechaInicial:a})),V(e)},className:"form-control",placeholderText:"dd/MM/yyyy",autoComplete:"off",maxDate:new Date}))),r.a.createElement(g.a.Group,{as:h.a,md:"3"},r.a.createElement(g.a.Label,{htmlFor:"fechaFinal"},"Fecha Final"),r.a.createElement("div",{className:"form-group"},r.a.createElement(f.a,{id:"fechaFinal",name:"fechaFinal",dateFormat:"dd/MM/yyyy",selected:J,onChange:function(e){var a=d()(e).format("YYYY/MM/DD");ee(Object(l.a)({},$,{fechaFinal:a})),B(e)},className:"form-control",placeholderText:"dd/MM/yyyy",autoComplete:"off",maxDate:new Date}))),r.a.createElement(g.a.Group,{as:h.a,md:"2"},r.a.createElement(g.a.Label,{htmlFor:"status"},"\xa0\xa0"),r.a.createElement("button",{className:"btn btn-block btn-primary mb-0",type:"submit"},"Buscar",r.a.createElement("i",{className:"feather icon-search"}))))))),r.a.createElement("hr",null),!0===c?r.a.createElement(T.a,null):r.a.createElement(r.a.Fragment,null,D.find((function(e){return 27===e.menuId&&3===e.accesoId}))?r.a.createElement(O.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Codigo"),r.a.createElement("th",null,"Tabla"),r.a.createElement("th",null,"Campo"),r.a.createElement("th",null,"Id Modificado"),r.a.createElement("th",null,"Tipo de Dato"),r.a.createElement("th",null,"Valor Anterior"),r.a.createElement("th",null,"Valor Nuevo"),r.a.createElement("th",null,"Usuario"),r.a.createElement("th",null,"Fecha"))),r.a.createElement("tbody",null,L.map((function(e){var a,t=e.bitacora_cambiosId,n=e.tabla,l=e.campo,c=e.modificadoId,o=e.tipo_dato,i=e.valor_anterior,u=e.valor_nuevo,s=e.Usuario,m=e.fecha_crea,d="N/A";s&&(d=null!==(a=null===s||void 0===s?void 0:s.user_name)&&void 0!==a?a:"N/A");return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,i),r.a.createElement("td",null,u),r.a.createElement("td",null,d),r.a.createElement("td",null,m))})))):r.a.createElement(x.a,null)))))))};a.default=function(){return r.a.createElement("div",null,r.a.createElement(M,null))}},84:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),l=t(71),c=t(21),o=t(583),i=t(14),u=function(){return r.a.createElement(i.a,null,r.a.createElement(l.a,null,r.a.createElement(c.a,null,r.a.createElement(o.a,{variant:"danger"},r.a.createElement(o.a.Heading,{as:"h4"},"Informaci\xf3n!"),r.a.createElement("p",null,"No esta autorizado para poder visualizar los elementos"),r.a.createElement("hr",null),r.a.createElement("p",{className:"mb-0"},"Comuniquese con el administrador para la asignaci\xf3n de permisos")))))}},87:function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return c}));var n=t(97),r=t.n(n);r.a.DataTable=t(105),t(106);var l=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;setTimeout((function(){r()(e).DataTable().destroy(),r()(e).DataTable({searching:!0,bLengthChange:!1,bAutoWidth:!1,lengthMenu:[[10,25,50,-1],[10,25,50,"Todos"]],displayLength:a,language:{processing:"Cargando informaci\xf3n",search:"Filtrar por:",lengthMenu:"Mostrar _MENU_ filas",info:"Vizualizaci\xf3n  _END_ de _TOTAL_ filas",infoEmpty:"Vizualizaci\xf3n del elemento 0 a 0 de 0 filas",infoFiltered:"(Filtrado de _MAX_ filas en total)",infoPostFix:"",loadingRecords:"Cargando...",zeroRecords:"No se logr\xf3 encontrar ninguna coincidencia",emptyTable:"No existen registros",paginate:{first:"Primera",previous:"Anterior",next:"Siguiente",last:"Ultima"},aria:{sortAscending:": active para ordenar la columna en orden ascendente",sortDescending:": active para ordenar la columna en orden descendente"}}})}),0)},c=function(e){r()(e).DataTable().destroy()}}}]);
//# sourceMappingURL=24.e40430c8.chunk.js.map