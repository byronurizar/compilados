(this.webpackJsonpapibase=this.webpackJsonpapibase||[]).push([[40],{571:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(5),c=t.n(o),i=t(10),l=t(12),u=t(71),s=t(21),m=t(374),d=t(393),p=t(247),b=t(22),f=t(14),E=t(15),v=t(8),h=t(84),O=t(19),g=t(593),j=t(26),I=t(11),y=(t(29),t(23)),C=function(e){var a=e.infoProducto,t=e.handleOnChangeItemProd;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"nombre"},"Producto"),r.a.createElement(I.TextInput,{name:"nombreProducto",id:"nombreProducto",autoComplete:"off",value:a.nombre,type:"text",disabled:!0})),r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"nombre"},"Precio Normal"),r.a.createElement(I.TextInput,{name:"precio",id:"precio",required:!0,value:a.precio,onChange:t,errorMessage:"Campo obligatorio",placeholder:"Precio de venta",autoComplete:"off",type:"number"})),r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"precio_mayorista"},"Precio Mayorista"),r.a.createElement(I.TextInput,{name:"precio_mayorista",id:"precio_mayorista",required:!0,value:a.precio_mayorista,onChange:t,errorMessage:"Campo obligatorio",placeholder:"Precio Mayorista",autoComplete:"off",type:"number"})),r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"cantidad_mayorista"},"Cuanto debe de comprar para aplicar a precio de mayorista"),r.a.createElement(I.TextInput,{name:"cantidad_mayorista",id:"cantidad_mayorista",required:!0,value:a.cantidad_mayorista,onChange:t,errorMessage:"Campo obligatorio",placeholder:"Cantidad que se debe de comprar para ser mayorista",autoComplete:"off",type:"number"})),r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"observaciones"},"Agregar observaciones si es necesario"),r.a.createElement(I.TextInput,{name:"observaciones",id:"observaciones",required:!0,value:a.observaciones,onChange:t,errorMessage:"Campo obligatorio",placeholder:"Observaciones",autoComplete:"off",type:"text",multiline:!0}))))},x=(t(278),function(e){var a=e.abrirModal,t=e.setAbrirModal,o=e.GetEncuesta,u=e.accesos,m=e.listDeptos,d=(Object(b.c)(),Object(n.useState)(!1)),p=Object(l.a)(d,2),f=p[0],h=p[1],x=Object(n.useState)([]),N=Object(l.a)(x,2),S=N[0],k=N[1],w=Object(n.useState)(""),P=Object(l.a)(w,2),M=P[0],_=P[1],F=Object(n.useState)([]),z=Object(l.a)(F,2),G=z[0],T=z[1],q=Object(n.useState)(-1),L=Object(l.a)(q,2),A=L[0],D=L[1],R=Object(n.useState)(!1),H=Object(l.a)(R,2),B=H[0],J=H[1],V=Object(n.useState)(0),Z=Object(l.a)(V,2),U=Z[0],K=Z[1],Q=Object(n.useState)([]),W=Object(l.a)(Q,2),X=W[0],Y=W[1],$=Object(y.a)({nombre:"",municipioId:""}),ee=Object(l.a)($,2),ae=ee[0],te=ee[1],ne=Object(y.a)({nombre:"",precio:0,precio_mayorista:0,cantidad_mayorista:0,observaciones:""}),re=Object(l.a)(ne,4),oe=re[0],ce=re[1],ie=re[3],le=function(){var e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),(a={}).nombre=ae.nombre,a.municipioId=ae.municipioId,a.detalle=X,e.next=7,Object(E.a)("encuesta",{method:"POST",body:JSON.stringify(a)});case 7:e.sent&&(Object(v.b)("Cotizaci\xf3n registrada exitosamente"),o(),t(!1)),h(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(e,a){return Number(e)-Number(a)},se=function(){var e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(E.a)("encuesta/producto");case 3:(a=e.sent)&&(K(a.length),k(a.sort(ue))),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(i.a)(c.a.mark((function e(a){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a>0)){e.next=10;break}if(!u.find((function(e){return 10===e.menuId&&3===e.accesoId}))){e.next=9;break}return h(!0),e.next=5,Object(E.a)("municipio?departamentoId=".concat(a,"&estadoId=1&include=0"));case 5:(t=e.sent)&&T(t),e.next=10;break;case 9:T([{municipioId:"",descripcion:"No esta autorizado"}]);case 10:h(!1);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){me(M)}),[M]),Object(n.useEffect)((function(){se()}),[]),Object(n.useEffect)((function(){if(A>=0&&A<U){var e=S[A];if(e){var a=e.encuesta_productoId,t=e.nombre;B||ie({encuesta_productoId:a,nombre:t,precio:0,precio_mayorista:0,cantidad_mayorista:0,observaciones:""})}else alert("No existe")}}),[A]);return console.log({indexActual:A,indexTotal:U,listProductoConsulta:X}),r.a.createElement(g.a,{show:a,onHide:function(){return t(!1)},size:"lg"},!0===f?r.a.createElement(O.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,{as:"h5"},A>=0?"COTIZACIPON ".concat(ae.nombre):"NUEVA COTIZACI\xd3N")),r.a.createElement(g.a.Body,null,r.a.createElement(I.ValidationForm,null,-1===A?r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"nombre"},"Nombre del Negocio"),r.a.createElement(I.TextInput,{name:"nombre",id:"nombre",required:!0,value:ae.nombre,onChange:te,errorMessage:"Campo obligatorio",placeholder:"Nombre del negocio",autoComplete:"off",style:{textTransform:"capitalize"},type:"text"})),r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"departamentoId"},"Departamento"),r.a.createElement(I.SelectGroup,{name:"departamentoId",id:"departamentoId",required:!0,value:M,onChange:function(e){var a=e.target;_(a.value)},errorMessage:"Campo obligatorio"},r.a.createElement("option",{value:""},"Seleccione un departamento"),m.map((function(e){var a=e.departamentoId,t=e.descripcion;return r.a.createElement("option",{value:a,key:a},t)})))),r.a.createElement(j.a.Group,{as:s.a,md:"12"},r.a.createElement(j.a.Label,{htmlFor:"municipioId"},"Municipio"),r.a.createElement(I.SelectGroup,{name:"municipioId",id:"municipioId",required:!0,value:ae.municipioId,onChange:te,errorMessage:"Campo obligatorio"},r.a.createElement("option",{value:""},"Seleccione un municipio"),G.map((function(e){var a=e.municipioId,t=e.descripcion;return r.a.createElement("option",{value:a,key:a},t)}))))):A<U?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Productos"),r.a.createElement("hr",null),r.a.createElement(C,{infoProducto:oe,handleOnChangeItemProd:ce}),r.a.createElement("hr",null)):r.a.createElement(j.a.Row,null,r.a.createElement("p",null,"Gracias por completar la cotizaci\xf3n, por favor presione en el boton finalizar para enviar la cotizaci\xf3n.")),r.a.createElement(j.a.Row,null,!1,A<U?r.a.createElement("button",{type:"button",className:"btn btn-success ml-2",onClick:function(){if(String(ae.nombre).trim().length>0)if(Number(ae.municipioId)>0){if(A<U){if(J(!1),A>=0){var e=X||[];e.push(oe),Y(e)}D(A+1)}}else Object(v.c)("Por favor seleccione el municipio");else Object(v.c)("Por favor ingrese el nombre del negocio")}},"Siguiente"):r.a.createElement("button",{type:"button",className:"btn btn-success ml-2",onClick:le},"Finalizar"))))))}),N=function(){var e=Object(b.d)((function(e){return e})),a=Object(n.useState)(!0),t=Object(l.a)(a,2),o=t[0],v=t[1],g=Object(n.useState)([]),j=Object(l.a)(g,2),I=j[0],y=j[1],C=Object(n.useState)(!1),N=Object(l.a)(C,2),S=N[0],k=N[1],w=Object(n.useState)([]),P=Object(l.a)(w,2),M=P[0],_=P[1],F=Object(n.useState)([]),z=Object(l.a)(F,2),G=z[0],T=z[1],q=function(){var e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.find((function(e){return 9===e.menuId&&3===e.accesoId}))){e.next=8;break}return v(!0),e.next=4,Object(E.a)("departamento?estadoId=1&include=0");case 4:(a=e.sent)&&T(a),e.next=9;break;case 8:T([{departamentoId:"",descripcion:"No esta autorizado"}]);case 9:v(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.find((function(e){return 3===e.accesoId}))){e.next=7;break}return v(!0),e.next=4,Object(E.a)("encuesta?estadoId=1");case 4:(a=e.sent)&&_(a),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!function(){if(null===e||void 0===e?void 0:e.accesos){var a=e.accesos.filter((function(e){return-1===e.menuId||9===e.menuId||10===e.menuId}));y(a)}v(!1)}()}),[]),Object(n.useEffect)((function(){L(),q()}),[I]),r.a.createElement(f.a,null,r.a.createElement(u.a,{className:"btn-page"},r.a.createElement(s.a,{sm:12},r.a.createElement(m.a,null,r.a.createElement(m.a.Header,null,r.a.createElement(m.a.Title,{as:"h5"},"Cotizaciones Realizadas")),r.a.createElement(m.a.Body,null,!0===o?r.a.createElement(O.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"align-items-center m-l-0"},r.a.createElement(s.a,null),r.a.createElement(s.a,{className:"text-right"},I.find((function(e){return 1===e.accesoId}))&&r.a.createElement(d.a,{variant:"success",className:"btn-sm btn-round has-ripple",onClick:function(){k(!0)}},r.a.createElement("i",{className:"feather icon-plus"})," Nueva"))),I.find((function(e){return 3===e.accesoId}))?r.a.createElement(p.a,{striped:!0,hover:!0,responsive:!0,bordered:!0,id:"mytable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"C\xf3digo"),r.a.createElement("th",null,"Negocio"),r.a.createElement("th",null,"Departamento"),r.a.createElement("th",null,"Municipio"))),r.a.createElement("tbody",null,M.map((function(e){var a=e.encuesta_comercioId,t=e.nombre,n=e.Municipio,o=n.descripcion,c=n.Departamento.descripcion;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a),r.a.createElement("td",null,t),r.a.createElement("td",null,c),r.a.createElement("td",null,o))})))):r.a.createElement(h.a,null)),!0===S&&r.a.createElement(x,{abrirModal:S,setAbrirModal:k,GetEncuesta:L,listDeptos:G,accesos:I}))))))};a.default=function(){return r.a.createElement(N,null)}},84:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),o=t(71),c=t(21),i=t(592),l=t(14),u=function(){return r.a.createElement(l.a,null,r.a.createElement(o.a,null,r.a.createElement(c.a,null,r.a.createElement(i.a,{variant:"danger"},r.a.createElement(i.a.Heading,{as:"h4"},"Informaci\xf3n!"),r.a.createElement("p",null,"No esta autorizado para poder visualizar los elementos"),r.a.createElement("hr",null),r.a.createElement("p",{className:"mb-0"},"Comuniquese con el administrador para la asignaci\xf3n de permisos")))))}}}]);
//# sourceMappingURL=40.953eb3a6.chunk.js.map